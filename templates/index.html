<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter Frequency Analyzer - Python Learning App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .text-input {
            min-height: 150px;
            font-family: 'Courier New', monospace;
        }
        .stats-card {
            transition: transform 0.2s;
        }
        .stats-card:hover {
            transform: translateY(-5px);
        }
        .plot-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .frequency-table {
            max-height: 300px;
            overflow-y: auto;
        }
        .loading {
            display: none;
        }
        .loading.show {
            display: block;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-font me-2"></i>
                Letter Frequency Analyzer
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text">
                    Python & Statistics Learning Tool
                </span>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h1 class="display-4 text-primary">
                    <i class="fas fa-chart-bar me-3"></i>
                    Letter Frequency Analyzer
                </h1>
                <p class="lead">Analyze text patterns and learn about frequency distributions, statistics, and data visualization</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-keyboard me-2"></i>
                            Input Text
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="textInput" class="form-label">Enter or paste your text here:</label>
                            <textarea 
                                class="form-control text-input" 
                                id="textInput" 
                                placeholder="Type or paste your text here to analyze letter and word frequencies..."
                            ></textarea>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" id="analyzeBtn">
                                <i class="fas fa-search me-2"></i>
                                Analyze Text
                            </button>
                            <button class="btn btn-outline-secondary" id="sampleTextBtn">
                                <i class="fas fa-lightbulb me-2"></i>
                                Load Sample Text
                            </button>
                            <button class="btn btn-outline-danger" id="clearBtn">
                                <i class="fas fa-trash me-2"></i>
                                Clear Text
                            </button>
                        </div>

                        <div class="loading mt-3 text-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2 text-muted">Analyzing text...</p>
                        </div>
                    </div>
                </div>

                <div class="card mt-3 shadow">
                    <div class="card-header bg-info text-white">
                        <h6 class="mb-0">
                            <i class="fas fa-info-circle me-2"></i>
                            Learning Concepts
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-primary">Python Concepts:</h6>
                                <ul class="small">
                                    <li>String manipulation</li>
                                    <li>Dictionary operations</li>
                                    <li>List comprehensions</li>
                                    <li>File I/O operations</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-success">Statistics Concepts:</h6>
                                <ul class="small">
                                    <li>Frequency distributions</li>
                                    <li>Central tendency</li>
                                    <li>Variability measures</li>
                                    <li>Data visualization</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-calculator me-2"></i>
                            Text Statistics
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h6 class="text-muted">Characters</h6>
                                    <h3 id="charCount" class="text-primary">-</h3>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h6 class="text-muted">Words</h6>
                                    <h3 id="wordCount" class="text-success">-</h3>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stats-card">
                                    <h6 class="text-muted">Letters</h6>
                                    <h3 id="letterCount" class="text-info">-</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card mt-3 shadow">
                    <div class="card-header bg-warning text-dark">
                        <h6 class="mb-0">
                            <i class="fas fa-chart-pie me-2"></i>
                            Letter Statistics
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-md-6">
                                <h6 class="text-muted">Most Common</h6>
                                <h5 id="mostCommonLetter" class="text-primary">-</h5>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-muted">Unique Letters</h6>
                                <h5 id="uniqueLetters" class="text-success">-</h5>
                            </div>
                        </div>
                        <div class="mt-3">
                            <h6 class="text-muted">Letter Frequency Table:</h6>
                            <div class="frequency-table">
                                <div id="letterTable" class="text-center text-muted">
                                    <p>Enter text to see letter frequencies</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Visualization Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card shadow">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-area me-2"></i>
                            Data Visualizations
                        </h5>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs" id="plotTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="letter-tab" data-bs-toggle="tab" data-bs-target="#letter-plot" type="button" role="tab">
                                    <i class="fas fa-font me-2"></i>Letter Frequency
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="word-tab" data-bs-toggle="tab" data-bs-target="#word-plot" type="button" role="tab">
                                    <i class="fas fa-language me-2"></i>Word Frequency
                                </button>
                            </li>
                        </ul>
                        
                        <div class="tab-content mt-3" id="plotTabContent">
                            <div class="tab-pane fade show active" id="letter-plot" role="tabpanel">
                                <div class="plot-container text-center">
                                    <div id="letterPlotContainer">
                                        <p class="text-muted">Enter text and click analyze to see letter frequency visualization</p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="word-plot" role="tabpanel">
                                <div class="plot-container text-center">
                                    <div id="wordPlotContainer">
                                        <p class="text-muted">Enter text and click analyze to see word frequency visualization</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light text-center py-4 mt-5">
        <div class="container">
            <p class="mb-0">
                <i class="fas fa-code me-2"></i>
                Built with Python, Flask, and Matplotlib | 
                <i class="fas fa-graduation-cap me-2"></i>
                Learning Python & Statistics
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample text for demonstration
        const sampleTexts = [
            "The quick brown fox jumps over the lazy dog. This pangram contains every letter of the English alphabet at least once. Pangrams are often used to display font samples and test keyboards.",
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
            "Statistics is the science of collecting, analyzing, interpreting, and presenting data. It helps us make informed decisions based on evidence rather than intuition alone."
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            const sampleTextBtn = document.getElementById('sampleTextBtn');
            const clearBtn = document.getElementById('clearBtn');
            const textInput = document.getElementById('textInput');
            const loading = document.querySelector('.loading');

            // Event listeners
            analyzeBtn.addEventListener('click', analyzeText);
            sampleTextBtn.addEventListener('click', loadSampleText);
            clearBtn.addEventListener('click', clearText);

            // Load random sample text
            function loadSampleText() {
                const randomText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
                textInput.value = randomText;
            }

            // Clear text
            function clearText() {
                textInput.value = '';
                resetDisplay();
            }

            // Reset display
            function resetDisplay() {
                document.getElementById('charCount').textContent = '-';
                document.getElementById('wordCount').textContent = '-';
                document.getElementById('letterCount').textContent = '-';
                document.getElementById('mostCommonLetter').textContent = '-';
                document.getElementById('uniqueLetters').textContent = '-';
                document.getElementById('letterTable').innerHTML = '<p class="text-center text-muted">Enter text to see letter frequencies</p>';
                document.getElementById('letterPlotContainer').innerHTML = '<p class="text-muted">Enter text and click analyze to see letter frequency visualization</p>';
                document.getElementById('wordPlotContainer').innerHTML = '<p class="text-muted">Enter text and click analyze to see word frequency visualization</p>';
            }

            // Analyze text
            async function analyzeText() {
                const text = textInput.value.trim();
                if (!text) {
                    alert('Please enter some text to analyze');
                    return;
                }

                // Show loading
                loading.classList.add('show');
                analyzeBtn.disabled = true;

                try {
                    const response = await fetch('/analyze', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ text: text })
                    });

                    const data = await response.json();
                    
                    if (data.error) {
                        alert(data.error);
                        return;
                    }

                    displayResults(data);
                } catch (error) {
                    console.error('Error:', error);
                    alert('An error occurred while analyzing the text');
                } finally {
                    // Hide loading
                    loading.classList.remove('show');
                    analyzeBtn.disabled = false;
                }
            }

            // Display results
            function displayResults(data) {
                // Update statistics
                document.getElementById('charCount').textContent = data.text_length;
                document.getElementById('wordCount').textContent = data.word_count;
                document.getElementById('letterCount').textContent = data.character_count;
                document.getElementById('mostCommonLetter').textContent = `${data.letter_statistics.most_common[0]} (${data.letter_statistics.most_common[1]})`;
                document.getElementById('uniqueLetters').textContent = data.letter_statistics.unique_items;

                // Update letter table
                const letterTable = document.getElementById('letterTable');
                let tableHTML = '<div class="row">';
                Object.entries(data.letter_frequency)
                    .sort((a, b) => b[1] - a[1])
                    .forEach(([letter, count]) => {
                        tableHTML += `
                            <div class="col-md-2 col-4 mb-2">
                                <div class="border rounded p-2">
                                    <strong>${letter.toUpperCase()}</strong><br>
                                    <small class="text-muted">${count}</small>
                                </div>
                            </div>
                        `;
                    });
                tableHTML += '</div>';
                letterTable.innerHTML = tableHTML;

                // Update plots
                document.getElementById('letterPlotContainer').innerHTML = 
                    `<img src="data:image/png;base64,${data.letter_plot}" class="img-fluid" alt="Letter Frequency Plot">`;
                document.getElementById('wordPlotContainer').innerHTML = 
                    `<img src="data:image/png;base64,${data.word_plot}" class="img-fluid" alt="Word Frequency Plot">`;
            }
        });
    </script>
</body>
</html>
